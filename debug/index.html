<!DOCTYPE html>
<html>
<head>
    <title>Mapbox GL JS debug page</title>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel='stylesheet' href='../dist/mapbox-gl.css' />
    <style>
        body { margin: 0; padding: 0; }
        html, body, #map { height: 100%; }
    </style>
</head>

<body>
<div id='map'></div>

<script src='../dist/mapbox-gl-dev.js'></script>
<script src='../debug/access_token_generated.js'></script>
<script src='/debug/tdtStyle-vec-1.6.3-jiami.js'></script>
<script>

mapboxgl.accessToken = 'pk.eyJ1Ijoid2xmZWkiLCJhIjoiY2puMTB6MXZlNHZjcTNwbnl3dnowYjhoaSJ9.s6ZkjRHGIY6xVNBRAf52MQ';

var map = window.map = new mapboxgl.Map({
    container: 'map',
    zoom: 4,
    center: [109.70, 19.11],
    style: {
        "version": 8,
        "sprite": "http://192.9.104.187/static/sprite/png",
        "glyphs": "http://192.9.104.187/static/font/{fontstack}/{range}.pbf",
        "sources": {},
        "layers": []
    }
});


// map.on('load', () => {
//     map.addSource('region', {
//         'type':'geojson',
//         data:'http://localhost:9966/debug/china.geojson'
//     });



//     map.addLayer({
//         id:'region-layer',
//         type:'fill',
//         source:'region'
//     });
// });
// setTimeout(function(){
//     map.switchProjection('EPSG:4326', (style) => {
//         map.removeLayer('simple-tiles');
//         map.removeLayer('simple-tiles-name');
//         map.removeSource('raster-tiles');

//         map.addSource('raster-tiles-c',  {
//             'type': 'raster',
//             'tiles': [
//                 'https://t0.tianditu.gov.cn/DataServer?T=vec_c&x={x}&y={y}&l={z}&tk=2db0ba5b3fa4414b2ea0ac2903d7519c'
//             ],
//             'tileSize': 256,
//         });

//         map.addSource('raster-tiles-name-c',  {
//             'type': 'raster',
//             'tiles': [
//                 'https://t0.tianditu.gov.cn/DataServer?T=cva_c&x={x}&y={y}&l={z}&tk=2db0ba5b3fa4414b2ea0ac2903d7519c'
//             ],
//             'tileSize': 256,
//         });

//         map.addLayer({
//             'id': 'simple-tiles',
//             'type': 'raster',
//             'source': 'raster-tiles-c',
//             'minzoom': 0,
//             'maxzoom': 22
//         });

//         map.addLayer({
//             'id': 'simple-tiles-name',
//             'type': 'raster',
//             'source': 'raster-tiles-name-c',
//             'minzoom': 0,
//             'maxzoom': 22
//         });
//     });
// }, 5000);

map.on('load', () => {

        map.addSource('raster-tiles-c',  {
            'type': 'raster',
            'tiles': [
                'https://t0.tianditu.gov.cn/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=2db0ba5b3fa4414b2ea0ac2903d7519c'
            ],
            'tileSize': 256,
        });

        map.addLayer({
            'id': 'simple-tiles',
            'type': 'raster',
            'source': 'raster-tiles-c',
            'minzoom': 0,
            'maxzoom': 22
        });


        map.addSource('vector-source', {
            type: "vector",
            tiles: ["http://192.9.104.187:8084/vt1/{z}/{x}/{y}"],
            promoteId: "gb",
        });

        map.addLayer({
            id: 'vector',
            type: 'fill',
            source: 'vector-source',
            'source-layer': 'aproa',
            paint: {
                'fill-opacity':0.8,
                'fill-outline-color': '#d3d3d3'
            }
        });

    // map.addSource('national-park', {
    //     'type': 'geojson',
    //     'data': {
    //         'type': 'Feature',
    //         'properties':{ name:'Èù¢' },
    //         'geometry': {
    //             'type': 'Polygon',
    //             'coordinates': [
    //                 [
    //                     [-67.13734351262877, 45.137451890638886],
    //                     [-66.96466, 44.8097],
    //                     [-68.03252, 44.3252],
    //                     [-69.06, 43.98],
    //                     [-70.11617, 43.68405],
    //                     [-70.64573401557249, 43.090083319667144],
    //                     [-70.75102474636725, 43.08003225358635],
    //                     [-70.79761105007827, 43.21973948828747],
    //                     [-70.98176001655037, 43.36789581966826],
    //                     [-70.94416541205806, 43.46633942318431],
    //                     [-71.08482, 45.3052400000002],
    //                     [-70.6600225491012, 45.46022288673396],
    //                     [-70.30495378282376, 45.914794623389355],
    //                     [-70.00014034695016, 46.69317088478567],
    //                     [-69.23708614772835, 47.44777598732787],
    //                     [-68.90478084987546, 47.184794623394396],
    //                     [-68.23430497910454, 47.35462921812177],
    //                     [-67.79035274928509, 47.066248887716995],
    //                     [-67.79141211614706, 45.702585354182816],
    //                     [-67.13734351262877, 45.137451890638886]
    //                 ]
    //             ]
    //         }
    //     }
    // });
 
    // map.addLayer({
    //     'id': 'maine',
    //     'type': 'fill',
    //     'source': 'national-park',
    //     'layout': {},
    //     'paint': {
    //         'fill-color': '#088',
    //         'fill-opacity': 0.8
    //     }
    // });

    // map.on('mousemove', 'maine', function (e) {
    //     var features = map.queryRenderedFeatures(e.point);
    //     console.log(features);
    // })
    // map.addLayer({
    //     'id': 'park-volcanoes',
    //     'type': 'circle',
    //     'source': 'national-park',
    //     'paint': {
    //         'circle-radius': [ 'get', 'child' ]
    //         // 'pie-fields': [ 'child', 'man', 'old' ]
    //     }
    // });
});
</script>
</body>
</html>
